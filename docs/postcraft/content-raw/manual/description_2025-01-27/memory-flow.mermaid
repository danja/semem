sequenceDiagram
    participant UI as Interface
    participant AH as Active Handler
    participant MM as Memory Manager
    participant LLM as LLM Handler
    participant EH as Embedding Handler
    participant ST as Storage

    UI->>AH: interaction request
    AH->>MM: retrieve relevant context
    MM->>EH: generate embedding
    MM->>ST: query similar interactions
    ST-->>MM: relevant memories
    MM->>LLM: generate response
    LLM-->>MM: response
    MM->>ST: store interaction
    AH-->>UI: complete response