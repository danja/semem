# ZPT FilterBuilder entity-level query
SELECT DISTINCT ?uri ?label ?type ?prefLabel ?embedding ?metadata
WHERE {
    GRAPH <{{graphName}}> {
        {
            ?uri a ragno:Entity ;
                 rdfs:label ?label ;
                 rdf:type ?type .
            OPTIONAL { ?uri skos:prefLabel ?prefLabel }
            OPTIONAL { ?uri semem:embedding ?embedding }
            OPTIONAL { ?uri semem:metadata ?metadata }
        }
        UNION
        {
            ?uri a semem:Interaction ;
                 semem:prompt ?label .
            OPTIONAL { ?uri semem:output ?prefLabel }
            OPTIONAL { ?uri semem:embedding ?embedding }
            OPTIONAL { ?uri semem:metadata ?metadata }
            BIND("interaction" AS ?type)
        }
        {{filters}}
    }
}
{{orderBy}}
{{limit}}